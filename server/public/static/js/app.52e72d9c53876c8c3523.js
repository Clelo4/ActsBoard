webpackJsonp([1],{"1Uvw":function(e,t){},A1mw:function(e,t){},"B8z/":function(e,t){},"IHQ+":function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("7+uW"),n=a("mtWM"),i=a.n(n),l={name:"Header",data:function(){return{activeIndex:"2",activeIndex2:"1"}},methods:{handleSelect:function(e,t){},loginout:function(){var e=this;axios.post("/manage/admin/logout").then(function(t){0!=t.data.errcode?e.$message("登出失败"):e.$message("登出成功")}).catch(function(t){e.$message("登出失败")})}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"header"},[a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.activeIndex2,mode:"horizontal",router:"","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:e.handleSelect}},[a("el-menu-item",{attrs:{index:"/"}},[e._v("ActsBoard")]),e._v(" "),a("el-menu-item",{attrs:{index:"/manage/login"}},[e._v("登录")]),e._v(" "),a("el-menu-item",{attrs:{index:"/manage/signup"}},[e._v("注册")]),e._v(" "),a("el-menu-item",{on:{click:e.loginout}},[e._v("登出")]),e._v(" "),a("el-menu-item",{attrs:{index:"/manage/getacts"}},[e._v("查看活动")]),e._v(" "),a("el-menu-item",{attrs:{index:"/manage/addact"}},[e._v("添加活动")])],1),e._v(" "),a("div",{staticClass:"line"})],1)},staticRenderFns:[]};var c={name:"App",components:{Header:a("VU/8")(l,s,!1,function(e){a("hdwJ")},"data-v-5155aa4a",null).exports}},r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("Header"),this._v(" "),t("router-view")],1)},staticRenderFns:[]};var u=a("VU/8")(c,r,!1,function(e){a("ZrUo")},null,null).exports,m=a("/ocq"),d={name:"ManageLogin",components:{},data:function(){return{form:{username:"",password:"",verifyCode:""},loginResponse:""}},methods:{onSubmit:function(){var e=this;axios.post("/manage/admin/login",this.form).then(function(t){console.log(t.data),0!=t.data.errcode?e.loginResponse=t.data.errmsg:(e.loginResponse=t.data.data,e.$router.push({path:"/manage/main"}))}).catch(function(e){$this.$message("网络错误,请重试")}),console.log("submit!")}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login"},[a("el-form",{attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"验证码"}},[a("el-input",{model:{value:e.form.verifyCode,callback:function(t){e.$set(e.form,"verifyCode",t)},expression:"form.verifyCode"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("登录")]),e._v(" "),a("el-button",[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var g=a("VU/8")(d,f,!1,function(e){a("A1mw")},"data-v-3b42bb5c",null).exports,p={name:"ManageSignup",components:{},data:function(){return{form:{username:"",password:"",email:"",mobile:"",register_code:""},signupResponse:""}},methods:{onSubmit:function(){var e=this;axios.post("/manage/admin/signup",this.form).then(function(t){console.log(t.data),0!=t.data.errcode?e.signupResponse=t.data.errmsg:(e.signupResponse=t.data.data,e.$router.push({path:"/manage/login"}))}),console.log("submit!")}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"signup"},[a("el-form",{attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱"}},[a("el-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号"}},[a("el-input",{model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"注册码"}},[a("el-input",{model:{value:e.form.register_code,callback:function(t){e.$set(e.form,"register_code",t)},expression:"form.register_code"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("注册")]),e._v(" "),a("el-button",[e._v("取消")])],1)],1),e._v(" "),a("div",[e._v(e._s(e.signupResponse))])],1)},staticRenderFns:[]};var v=a("VU/8")(p,h,!1,function(e){a("ZrAD")},"data-v-cdeda076",null).exports,_={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"manage_main"},[t("p",[this._v("登录成功")])])}]};var b=a("VU/8")({name:"ManageMain",components:{}},_,!1,function(e){a("j9W7")},null,null).exports,w=a("mvHQ"),x=a.n(w),$={name:"ManageAddActivities",components:{},data:function(){return{form:{name:"",valid_date:"",school:"",taglist:[],act_detail:"",pic_url:"",litimg_url:""},signupResponse:"",loadingfullscreen:!1,fileList:[],lmodel:"",fileUploadResult:!1,fileUploadState:0,tags:[]}},created:function(){this.tags=["比赛","文娱","公益","运动","社团招新","讲座","企业宣讲","其他"]},methods:{onSubmit:function(){var e=this;if(-1==this.fileUploadState)return console.log("this.fileUploadState:",this.fileUploadState),void this.$message("图片正在上传，请重新点击提交按钮!");0==this.form.taglist.length||this.form.taglist.length>3?this.$message("标签数量1~3"):(this.loadingfullscreen=!0,console.log("pic_url:",this.form.pic_url),axios.post("http://web.iamxuyuan.com/manage/activities/publish",this.form).then(function(t){console.log(t.status),0!=t.data.errcode?(e.$message(t.data.errmsg),e.loadingfullscreen=!1):(e.$message(t.data.data),e.form.name="",e.form.valid_date="",e.form.school="",e.form.taglist=[],e.form.act_detail="",e.form.pic_url="",e.loadingfullscreen=!1)}).catch(function(t){e.$message("添加失败"),e.loadingfullscreen=!1}),console.log("submit!"))},goToHome:function(){this.$router.push({path:"/"})},beforeRemove:function(e,t){return this.$confirm("确定移除 "+e.name+"？")},getAuthorization:function(e,t){var a=(e.Method||"get").toLowerCase(),o=e.Key||"";console.log("in getAuthorization");var n=new XMLHttpRequest,i={method:a,pathname:o};n.open("POST",window.cosAuthUrl,!0),n.setRequestHeader("content-type","application/json"),n.onload=function(e){"action deny"===e.target.responseText?alert("action deny"):t(e.target.responseText)},n.send(x()(i))},uploadFile:function(e,t){var a="/"+window.cosFilePath+"/"+window.cosFileName;console.log("here");var o=this;this.getAuthorization({Method:window.cosMethod,Key:a},function(n){console.log("getAuthorization");var i=window.cosUrl+"/"+window.cosFilePath+"/"+window.cosFileName,l=new XMLHttpRequest;l.open(window.cosMethod,i,!0),l.setRequestHeader("Authorization",n),l.onload=function(){if(200===l.status||206===l.status){o.fileUploadResult=!0,o.fileUploadState=1;var e=l.getResponseHeader("etag");o.form.pic_url=window.cosUrl+"/"+window.cosFilePath+"/"+window.cosFileName,alert(o.form.pic_url),t(null,{url:i,ETag:e})}else t("文件 "+a+" 上传失败，状态码："+l.status)},l.onerror=function(){t("文件 "+a+" 上传失败，请检查是否没配置 CORS 跨域规则")},l.send(e)})},tirggerFile:function(e){var t=e.target.files[0];window.cosMethod="PUT",window.cosFilePath="act_pic",window.cosUrl="http://actsboard-1253442303.cos.ap-guangzhou.myqcloud.com",window.cosFileName=this.randomString(3,"HD")+"."+t.name.split(".")[1],window.cosAuthUrl="http://web.iamxuyuan.com/cos/auth.php",window.newFile=new File([t],window.cosFileName,{type:t.type}),this.fileUploadState=-1,this.uploadFile(window.newFile,function(e,t){console.log("4:",e),console.log("5:",t)})},randomString:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e=e||32;var a="DEFGHIJKLNOPQRSdefhijkmnprswxyz",o=a.length,n="",i=0;for(i=0;i<e;i++)n+=a.charAt(Math.floor(Math.random()*o));return"ACT_"+n+"_"+t+(new Date).getTime()}}},y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"manageaddact"},[a("el-form",{attrs:{id:"el_form_manageaddact",model:e.form,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"活动名称"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"信息时间"}},[a("el-date-picker",{attrs:{label:"活动信息有效期的截止时间",type:"date",placeholder:"活动信息有效期的截止时间","value-format":"yyyy-MM-dd"},model:{value:e.form.valid_date,callback:function(t){e.$set(e.form,"valid_date",t)},expression:"form.valid_date"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"学校"}},[a("el-input",{model:{value:e.form.school,callback:function(t){e.$set(e.form,"school",t)},expression:"form.school"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"活动标签"}},[a("el-checkbox-group",{attrs:{min:1,max:3},model:{value:e.form.taglist,callback:function(t){e.$set(e.form,"taglist",t)},expression:"form.taglist"}},e._l(e.tags,function(t){return a("el-checkbox-button",{key:t,attrs:{label:t}},[e._v(e._s(t))])}))],1),e._v(" "),a("el-form-item",{attrs:{label:"活动内容"}},[a("el-input",{attrs:{autosize:"",placeholder:"请输入内容",type:"textarea",rows:2},model:{value:e.form.act_detail,callback:function(t){e.$set(e.form,"act_detail",t)},expression:"form.act_detail"}})],1),e._v(" "),a("br"),e._v(" "),a("span",{},[a("span",[e._v("上传图片")]),e._v(" "),a("img",{attrs:{src:e.lmodel}}),e._v(" "),a("input",{attrs:{type:"file"},on:{change:function(t){e.tirggerFile(t)}}})]),e._v(" "),a("div",{attrs:{id:"msg"}}),e._v(" "),a("br"),e._v(" "),a("el-form-item",[a("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.loadingfullscreen,expression:"loadingfullscreen",modifiers:{fullscreen:!0,lock:!0}}],attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("提交")]),e._v(" "),a("el-button",{on:{click:e.goToHome}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var k=a("VU/8")($,y,!1,function(e){a("1Uvw")},"data-v-c735ce6e",null).exports,A={name:"ManageShowActs",components:{},data:function(){return{totalnums:50,tableD:[],dialogVisible:!1,dialogFormVisible:!1,selectActId:"",selectindex:"",currentPage:1}},created:function(){var e=this;axios.get("http://web.iamxuyuan.com/activities/getallnum").then(function(t){0!=t.data.errcode?e.$message=t.data.errmsg:(e.totalnums=t.data.data,console.log("ok!hh"))}).catch(function(t){e.$message="请求失败,请刷新重试"}),axios.post("http://web.iamxuyuan.com/manage/activities/getacts?page="+this.current_change).then(function(t){console.log(t.status),0!=t.data.errcode?e.$message("请求失败，请刷重试"):(e.tableD=t.data.data,console.log("success"))}).catch(function(t){e.$message("请求数据失败")}),console.log("created")},methods:{selectRow:function(e,t){this.selectActId=t[e].id,this.selectindex=e,console.log("act_id:",this.selectActId,t[e].name)},handleClick:function(e){console.log(e)},filterTag:function(e,t){return t.tag===e},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){console.log("handleClose"),e()}).catch(function(e){})},deleteact:function(){var e,t=this;e=this.selectindex,axios.post("http://web.iamxuyuan.com/manage/activities/deleteact",{act_id:this.selectActId}).then(function(a){console.log(a.status),0!=a.data.errcode?t.$message("删除活动失败"):(t.$message("删除活动成功"),t.tableD.splice(e,1))}).catch(function(e){t.$message("删除活动失败")})},getActs:function(){var e=this;axios.post("http://web.iamxuyuan.com/manage/activities/getacts?page="+this.currentPage).then(function(t){console.log(t.status),0!=t.data.errcode?e.$message("请求失败，请刷重试"):(e.tableD=t.data.data,console.log("success"))}).catch(function(t){e.$message("请求数据失败")})},goToActInfo:function(){console.log("....",this.selectActId,"....."),this.$router.push({path:"/manage/getactInfo",query:{id:this.selectActId}})}}},R={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{calss:"act_table"}},[a("el-container",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableD,border:""}},[a("el-table-column",{attrs:{fixed:"left",prop:"valid_date",label:"活动信息截止时间",align:"center",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"活动名称",align:"center",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"school",label:"学校",width:"180",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.dialogVisible=!0}},nativeOn:{click:function(a){a.preventDefault(),e.selectRow(t.$index,e.tableD)}}},[e._v("\n          移除\n        ")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.selectRow(t.$index,e.tableD)}},nativeOn:{click:function(t){t.preventDefault(),e.goToActInfo()}}},[e._v("\n          查看\n        ")])]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("span",[e._v("确定删除活动？")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1,e.deleteact()}}},[e._v("确 定")])],1)]),e._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.totalnums,"current-page":e.currentPage},on:{"current-change":e.getActs,"update:currentPage":function(t){e.currentPage=t}}})],1)},staticRenderFns:[]};var F=a("VU/8")(A,R,!1,function(e){a("nmKv")},null,null).exports,M={name:"ManageShowActInfo",data:function(){return{actinfo:{},dialogVisible:!1,dialogFormVisible:!1,tags:[],taglist:[]}},created:function(){var e=this;this.tags=["比赛","文娱","公益","运动","社团招新","讲座","企业宣讲","其他"];var t=this.$route.query.id;axios.get("http://web.iamxuyuan.com/util/gettaglist").then(function(t){console.log("获取标签成功"),200==t.status&&0==t.data.errcode&&(e.tags=t.data.data,console.log("this.tags:",e.tags))}).catch(function(e){console.log("获取标签失败")}),axios.get("http://web.iamxuyuan.com/manage/activities/getinfo?id="+t).then(function(t){console.log(t.data),console.log(t.data.errcode),0!=t.data.errcode?e.$message("请求失败11"):(e.actinfo=t.data.data,e.taglist=e.actinfo.taglist,console.log(e.actinfo.taglist),console.log(e.actinfo),console.log("success"))}).catch(function(t){console.log(t),console.log("11"),e.$message("请求失败")})},methods:{onSubmit:function(){var e=this;console.log(this.taglist),this.actinfo.taglist=this.taglist,axios.post("http://web.iamxuyuan.com/manage/activities/change",this.actinfo).then(function(t){console.log(t.data),0!=t.data.errcode?e.$message("修改失败"):e.$message("修改成功")}).catch(function(t){e.$message("网络错误,请重试")}),console.log("submit!")}}},S={render:function(){var e=this,t=this,a=t.$createElement,o=t._self._c||a;return o("div",{staticClass:"act_info"},[o("el-form",{attrs:{model:t.actinfo,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"活动名称"}},[o("el-input",{attrs:{value:"actinfo.name"},model:{value:t.actinfo.name,callback:function(e){t.$set(t.actinfo,"name",e)},expression:"actinfo.name"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"学校"}},[o("el-input",{attrs:{value:"actinfo.school"},model:{value:t.actinfo.school,callback:function(e){t.$set(t.actinfo,"school",e)},expression:"actinfo.school"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"活动标签"}},[o("el-checkbox-group",{model:{value:t.taglist,callback:function(e){t.taglist=e},expression:"taglist"}},t._l(t.tags,function(e){return o("el-checkbox-button",{key:e,attrs:{label:e}},[t._v(t._s(e))])}))],1),t._v(" "),o("el-form-item",{attrs:{label:"活动内容"}},[o("el-input",{attrs:{value:"actinfo.act_detail",type:"textarea",rows:3},model:{value:t.actinfo.act_detail,callback:function(e){t.$set(t.actinfo,"act_detail",e)},expression:"actinfo.act_detail"}},[t._v(">")])],1),t._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("修 改")]),t._v(" "),o("el-button",{on:{click:function(){e.$router.push({path:"/manage/getacts"})}}},[t._v("返 回")])],1)],1),t._v(" "),o("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[o("span",[t._v("确定修改活动？")]),t._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("返 回")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1,t.onSubmit()}}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var U=a("VU/8")(M,S,!1,function(e){a("IHQ+")},"data-v-599ae8d0",null).exports,V={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-container",[t("el-main",{staticClass:"home"},[this._v("\n    ActsBoard是一款高效率的校园活动信息平台产品，旨在将校园内的活动信息精准地匹配给学生用户。前期，我们通过运营若干个微信群，对群成员发布活动信息，以极低的成本构建MVP（最小可行化产品），观察市场反应。之后，我们基于微信开放平台，开发ActsBoard服务号，开发安卓端、iOS端APP。我们秉承精益创业理论，先将核心功能信息收集与发放做出，再不断进行PMF（Product/Market Fit）矫正产品迭代方向。并运用多种推广方式，实现产品从华工到大学城到全国范围的扩张。\n")])],1)},staticRenderFns:[]};var C=a("VU/8")({name:"Home"},V,!1,function(e){a("B8z/")},null,null).exports;o.default.use(m.a);var H=new m.a({routes:[{path:"/",name:"Home",component:C},{path:"/manage/login",name:"ManageLogin",component:g},{path:"/manage/signup",name:"ManageSignup",component:v},{path:"/manage/main",name:"ManageMain",component:b},{path:"/manage/addact",name:"ManageAddActivities",component:k},{path:"/manage/getacts",name:"ManageShowActs",component:F},{path:"/manage/getactInfo",name:"ManageShowActInfo",component:U}]}),I=a("zL8q"),P=a.n(I);a("tvR6");window.axios=i.a,o.default.config.productionTip=!1,o.default.use(P.a),new o.default({el:"#app",router:H,components:{App:u},template:"<App/>",render:function(e){return e(u)}})},ZrAD:function(e,t){},ZrUo:function(e,t){},hdwJ:function(e,t){},j9W7:function(e,t){},nmKv:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.52e72d9c53876c8c3523.js.map